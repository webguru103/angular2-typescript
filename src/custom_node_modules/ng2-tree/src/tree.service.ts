import { NodeSelectedEvent } from './tree.events';
import { Tree } from './tree';
import { Subject, Observable } from 'rxjs/Rx';
import { Injectable } from '@angular/core';

@Injectable()
export class TreeService {
  public nodeSelected$: Subject<NodeSelectedEvent> = new Subject<NodeSelectedEvent>();

  public constructor() {
  }

  public unselectStream(tree: Tree): Observable<any> {
    return this.nodeSelected$.filter((e: NodeSelectedEvent) => tree !== e.node);
  }

  public fireNodeSelected(tree: Tree): void {
    this.nodeSelected$.next(new NodeSelectedEvent(tree));
  }
}
